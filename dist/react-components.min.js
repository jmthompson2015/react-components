!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ReactComponent=t()}(this,(function(){"use strict";class e extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(e){const{item:t,onChange:s}=this.props,{checked:a}=e.target;s(t.key,a)}render(){const{item:e,isChecked:t}=this.props,s=ReactDOMFactories.input({key:`${e.key}${t}`,type:"checkbox",checked:t,onChange:this.handleChange,style:{verticalAlign:"middle"}}),a=ReactDOMFactories.span({style:{verticalAlign:"middle"}},e.label);return ReactDOMFactories.label({style:{display:"block",verticalAlign:"middle"}},s,a)}}e.propTypes={item:PropTypes.shape({key:PropTypes.string.isRequired,label:PropTypes.string.isRequired}).isRequired,onChange:PropTypes.func.isRequired,isChecked:PropTypes.bool},e.defaultProps={isChecked:!1};const t={},s=(e,t)=>({...e,...t});t.createButton=(e,t,a,n={})=>{const r=s(n,{key:t,className:a});return ReactDOMFactories.button(r,e)},t.createCell=(e,t,a,n={})=>{const r=s(n,{key:t,className:`dtc${a?` ${a}`:""}`});return ReactDOMFactories.div(r,e)},t.createFlexbox=(e,t,a,n={})=>{const r=s(n,{key:t,className:`flex${a?` ${a}`:""}`});return ReactDOMFactories.div(r,e)},t.createFlexboxWrap=(e,t,a,n={})=>{const r=s(n,{key:t,className:`flex flex-wrap${a?` ${a}`:""}`});return ReactDOMFactories.div(r,e)},t.createImg=(e,t,a,n={})=>{const r=s(n,{src:e,key:t,className:a});return ReactDOMFactories.img(r)},t.createRow=(e,t,a,n={})=>{const r=s(n,{key:t,className:`dt-row${a?` ${a}`:""}`});return ReactDOMFactories.div(r,e)},t.createSpan=(e,t,a,n={})=>{const r=s(n,{key:t,className:a});return ReactDOMFactories.span(r,e)},t.createTable=(e,t,a,n={})=>{const r=s(n,{key:t,className:`dt${a?` ${a}`:""}`});return ReactDOMFactories.div(r,e)};class a extends React.PureComponent{constructor(e){super(e);const{itemToChecked:t}=this.props;this.state={itemToChecked:t},this.handleApply=this.handleApplyFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}createButtonTable(){const e=t.createButton("Apply",null,null,{onClick:this.handleApply}),s=t.createCell(e,"applyButton","button"),a=t.createRow(s,"button-row");return t.createTable(a,"buttonTable","buttons")}handleApplyFunction(){const{applyOnClick:e}=this.props,{itemToChecked:t}=this.state;e(t)}handleChangeFunction(e,t){const{itemToChecked:s}=this.state,a={...s,[e]:t};this.setState({itemToChecked:a})}render(){const{items:s}=this.props,{itemToChecked:a}=this.state,n=s.map(s=>{const n=a[s.key],r=React.createElement(e,{item:s,isChecked:n,onChange:this.handleChange}),i=t.createCell(r);return t.createRow(i,s.key)}),r=t.createTable(n,"checkboxTable","checkbox-panel"),i=t.createCell(this.createButtonTable(),"buttonTable","button-panel"),o=[t.createRow(r,"checkboxTableRow"),t.createRow(i,"buttonRow")];return t.createTable(o,"checkboxTable")}}a.propTypes={applyOnClick:PropTypes.func.isRequired,items:PropTypes.arrayOf(PropTypes.shape({key:PropTypes.string.isRequired,label:PropTypes.string.isRequired})).isRequired,itemToChecked:PropTypes.shape().isRequired};class n extends React.Component{constructor(e){super(e),this.state={isExpanded:e.isExpanded},this.toggleExpand=this.toggleExpandFunction.bind(this)}createElementCell(){const{element:e}=this.props,{isExpanded:t}=this.state,s=t?"dtc pa1 v-mid":"dn";return ReactDOMFactories.div({key:"elementCell",className:s},e)}createHeaderCell(){const{header:e,headerClass:s}=this.props,{isExpanded:a}=this.state,n=t.createCell(e,"headerCell",s),r=a?"▶":"▼",i=ReactDOMFactories.div({key:"expandCell",onClick:this.toggleExpand},r),o=t.createRow([n,i],"headerExpandRow"),c=t.createTable(o,"headerExpandTable","w-100");return t.createCell(c,"headerCell")}toggleExpandFunction(){const{isExpanded:e}=this.state;this.setState({isExpanded:!e})}render(){const{className:e}=this.props,s=this.createHeaderCell(),a=this.createElementCell(),n=[t.createRow(s,"headerRow"),t.createRow(a,"elementRow")];return t.createTable(n,"collapsiblePaneTable",e)}}n.propTypes={element:PropTypes.shape().isRequired,className:PropTypes.string,header:PropTypes.string,headerClass:PropTypes.string,isExpanded:PropTypes.bool},n.defaultProps={className:"bg-light-gray ma1",header:void 0,headerClass:"b f5 ph1 pt1 tc",isExpanded:!0};const r=(e,t)=>new Promise((s,a)=>{const n=new Image;n.addEventListener("load",()=>{t&&console.log(`Loaded image: ${e} ${n.width}x${n.height}`),s(n)}),n.addEventListener("error",e=>a(e)),n.src=e});class i extends React.PureComponent{constructor(e){super(e),this.state={imageMap:{}},this.handleOnClick=this.handleOnClickFunction.bind(this)}componentDidMount(){this.loadImages(),this.paint()}componentDidUpdate(){this.paint()}handleOnClickFunction(e){const{onClick:t}=this.props;t(e)}loadImages(){const{images:e,isVerbose:t}=this.props;for(let s=0;s<e.length;s+=1)r(e[s],t).then(t=>{const{imageMap:a}=this.state,n={...a};n[e[s]]=t,this.setState({imageMap:n})})}paint(){const{drawLayerFunctions:e,height:t,customKey:s,width:a}=this.props,{imageMap:n}=this.state,r=document.getElementById(s).getContext("2d");e.forEach(e=>{e(r,a,t,n)})}render(){const{backgroundColor:e,clientProps:t,customKey:s,height:a,title:n,width:r}=this.props,i={...{id:s,key:s,height:a,onClick:this.handleOnClick,style:{backgroundColor:e},title:n,width:r},...t};return ReactDOMFactories.canvas(i)}}i.propTypes={drawLayerFunctions:PropTypes.arrayOf(PropTypes.func).isRequired,backgroundColor:PropTypes.string,clientProps:PropTypes.shape(),customKey:PropTypes.string,height:PropTypes.number,images:PropTypes.arrayOf(PropTypes.string),isVerbose:PropTypes.bool,onClick:PropTypes.func,title:PropTypes.string,width:PropTypes.number},i.defaultProps={backgroundColor:void 0,clientProps:{},customKey:"hexBoardCanvas",height:480,images:[],isVerbose:!1,onClick:()=>{},title:void 0,width:640};class o extends React.Component{constructor(e){super(e);const{initialInput:t}=this.props;this.state={input:t}}render(){const{buttons:e,buttonsClass:t,icon:s,message:a,messageClass:n,panelClass:r,title:i,titleClass:o}=this.props,c=[],l=ReactDOMFactories.td({colSpan:2,className:o},i);c.push(ReactDOMFactories.tr({key:0},l));const p=ReactDOMFactories.td({key:0,rowSpan:2},s),d=ReactDOMFactories.td({key:1,className:n},a);c.push(ReactDOMFactories.tr({key:1},[p,d]));const{input:h}=this.state,u=ReactDOMFactories.td({},h);c.push(ReactDOMFactories.tr({key:2},u));const y=ReactDOMFactories.td({colSpan:2,className:t},e);return c.push(ReactDOMFactories.tr({key:3},y)),ReactDOMFactories.table({className:r},ReactDOMFactories.tbody({},c))}}o.propTypes={buttons:PropTypes.shape().isRequired,message:PropTypes.oneOfType([PropTypes.string,PropTypes.shape()]).isRequired,title:PropTypes.string.isRequired,buttonsClass:PropTypes.string,icon:PropTypes.shape(),initialInput:PropTypes.shape(),messageClass:PropTypes.string,panelClass:PropTypes.string,titleClass:PropTypes.string},o.defaultProps={buttonsClass:"pa2 tr",icon:void 0,initialInput:void 0,messageClass:"",panelClass:"ba center v-top",titleClass:"b bg-light-gray f4 tc"};class c extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(e){const{item:t,onChange:s}=this.props,{checked:a}=e.target;s(t.key,a)}render(){const{item:e,isChecked:t}=this.props,s=ReactDOMFactories.input({key:`${e.key}${t}`,type:"radio",checked:t,onChange:this.handleChange,style:{verticalAlign:"middle"}}),a=ReactDOMFactories.span({style:{verticalAlign:"middle"}},e.label);return ReactDOMFactories.label({style:{display:"block",verticalAlign:"middle"}},s,a)}}c.propTypes={item:PropTypes.shape({key:PropTypes.string.isRequired,label:PropTypes.string.isRequired}).isRequired,onChange:PropTypes.func.isRequired,isChecked:PropTypes.bool},c.defaultProps={isChecked:!1};class l extends React.PureComponent{constructor(e){super(e);const{selected:t}=this.props;this.state={selected:t},this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(e){this.setState({selected:e});const{applyOnClick:t}=this.props;t(e)}render(){const{items:e}=this.props,{selected:s}=this.state,a=e.map(e=>{const a=e.key===s,n=React.createElement(c,{item:e,isChecked:a,onChange:this.handleChange}),r=t.createCell(n);return t.createRow(r,e.key)});return t.createTable(a,"radioButtonTable","radio-button-table")}}l.propTypes={applyOnClick:PropTypes.func.isRequired,items:PropTypes.arrayOf(PropTypes.shape({key:PropTypes.string.isRequired,label:PropTypes.string.isRequired})).isRequired,selected:PropTypes.string.isRequired};class p extends React.Component{render(){const{className:e,element:s,elementClass:a,title:n,titleClass:r}=this.props,i=t.createCell(n,"titleCell",r),o=t.createCell(s,"elementCell",a),c=[t.createRow(i,"titleRow"),t.createRow(o,"elementRow")];return t.createTable(c,"titledElementTable",e)}}p.propTypes={element:PropTypes.shape().isRequired,title:PropTypes.string.isRequired,className:PropTypes.string,elementClass:PropTypes.string,titleClass:PropTypes.string},p.defaultProps={className:"bg-light-gray ma1",elementClass:"ma0 tc v-mid",titleClass:"b f5 ph1 pt1 tc"};const d={};return d.CheckboxPanel=a,d.CollapsiblePane=n,d.LayeredCanvas=i,d.OptionPane=o,d.RadioButtonPanel=l,d.ReactUtilities=t,d.TitledElement=p,Object.freeze(d),d}));
